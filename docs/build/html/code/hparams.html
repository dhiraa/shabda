

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>HParams &mdash; shabda  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ModelBase" href="models.html" />
    <link rel="prev" title="DatasetFactory" href="data.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> shabda
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/AudioBasics.html">Audio Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/References.html">Related Work</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../setup/ubuntu.html">Ubuntu Environment Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../setup/intellij.html">IDE Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../setup/projectstructure.html">Shabda Folder Structure</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="run.html">Executor</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">DatasetFactory</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html#audiodatasetbase">AudioDatasetBase</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html#freesoundaudiodataset">FreeSoundAudioDataset</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">HParams</a></li>
<li class="toctree-l1"><a class="reference internal" href="models.html">ModelBase</a></li>
<li class="toctree-l1"><a class="reference internal" href="models.html#modelsfactory">ModelsFactory</a></li>
<li class="toctree-l1"><a class="reference internal" href="models.html#classifierbase">ClassifierBase</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">shabda</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>HParams</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/code/hparams.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="hparams">
<h1>HParams<a class="headerlink" href="#hparams" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="shabda.hyperparams.HParams">
<em class="property">class </em><code class="descclassname">shabda.hyperparams.</code><code class="descname">HParams</code><span class="sig-paren">(</span><em>hparams</em>, <em>default_hparams</em>, <em>allow_new_hparam=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shabda/hyperparams/hyperparams.html#HParams"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shabda.hyperparams.HParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A class that maintains hyperparameters for configing Shabda modules.
The class has several useful features:</p>
<ul>
<li><p class="first"><strong>Auto-completion of missing values.</strong> Users can specify only a subset of    hyperparameters they care about. Other hyperparameters will automatically    take the default values. The auto-completion performs <strong>recursively</strong> so     that hyperparameters taking <cite>dict</cite> values will also be auto-completed     <strong>All Shabda modules</strong> provide a     <code class="xref py py-meth docutils literal notranslate"><span class="pre">default_hparams()</span></code> containing allowed hyperparameters and their     default values. For example</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## Recursive auto-completion</span>
<span class="n">default_hparams</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}}</span>
<span class="n">hparams</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">22</span><span class="p">}}</span>
<span class="n">hparams_</span> <span class="o">=</span> <span class="n">HParams</span><span class="p">(</span><span class="n">hparams</span><span class="p">,</span> <span class="n">default_hparams</span><span class="p">)</span>
<span class="n">hparams_</span><span class="o">.</span><span class="n">todict</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}}</span>
    <span class="c1"># &quot;a&quot; and &quot;d&quot; are auto-completed</span>

<span class="c1">## All Shabda modules have built-in `default_hparams`</span>
<span class="n">hparams</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;dropout_rate&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">}</span>
<span class="n">emb</span> <span class="o">=</span> <span class="n">tx</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">WordEmbedder</span><span class="p">(</span><span class="n">hparams</span><span class="o">=</span><span class="n">hparams</span><span class="p">,</span> <span class="p">)</span>
<span class="n">emb</span><span class="o">.</span><span class="n">hparams</span><span class="o">.</span><span class="n">todict</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span>
    <span class="s2">&quot;dropout_rate&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>  <span class="c1"># provided value</span>
    <span class="s2">&quot;dim&quot;</span><span class="p">:</span> <span class="mi">100</span>            <span class="c1"># default value</span>
    
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first"><strong>Automatic typecheck.</strong> For most hyperparameters, provided value must    have the same or compatible dtype with the default value. HParams does    necessary typecheck, and raises Error if improper dtype is provided.    Also, hyperparameters not listed in <cite>default_hparams</cite> are not allowed,    except for “kwargs” as detailed below.</p>
</li>
<li><p class="first"><strong>Flexible dtype for specified hyperparameters.</strong>  Some hyperparameters    may allow different dtypes of values.</p>
<blockquote>
<div><ul class="simple">
<li>Hyperparameters named “type” are not typechecked.        For example, in <code class="xref py py-func docutils literal notranslate"><span class="pre">get_rnn_cell()</span></code>, hyperparameter         <cite>“type”</cite> can take value of an RNNCell class, its string name of module         path, or an RNNCell class instance. (String name or module path is         allowd so that users can specify the value in YAML config files.)</li>
<li>For other hyperparameters, list them        in the “&#64;no_typecheck” field in <cite>default_hparams</cite> to skip typecheck.         For example, in <code class="xref py py-func docutils literal notranslate"><span class="pre">get_rnn_cell()</span></code>, hyperparameter         “_keep_prob” can be set to either a <cite>float</cite> or a <cite>tf.placeholder</cite>.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Special flexibility of keyword argument hyparameters.</strong>     Hyperparameters named “kwargs” are used as keyword arguments for a class    constructor or a function call. Such hyperparameters take a <cite>dict</cite>, and     users can add arbitrary valid keyword arguments to the dict. For example:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">default_rnn_cell_hparams</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;BasicLSTMCell&quot;</span><span class="p">,</span>
    <span class="s2">&quot;kwargs&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;num_units&quot;</span><span class="p">:</span> <span class="mi">256</span> <span class="p">}</span>
    <span class="c1"># Other hyperparameters</span>
    
<span class="p">}</span>
<span class="n">my_hparams</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;kwargs&quot;</span> <span class="p">{</span>
        <span class="s2">&quot;num_units&quot;</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
        <span class="s2">&quot;forget_bias&quot;</span><span class="p">:</span> <span class="mf">0.0</span>         <span class="c1"># Other valid keyword arguments</span>
        <span class="s2">&quot;activation&quot;</span><span class="p">:</span> <span class="s2">&quot;tf.nn.relu&quot;</span> <span class="c1"># for BasicLSTMCell constructor</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">HParams</span><span class="p">(</span><span class="n">my_hparams</span><span class="p">,</span> <span class="n">default_rnn_cell_hparams</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first"><strong>Rich interfaces.</strong> An HParams instance provides rich interfaces for    accessing, updating, or adding hyperparameters.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">hparams</span> <span class="o">=</span> <span class="n">HParams</span><span class="p">(</span><span class="n">my_hparams</span><span class="p">,</span> <span class="n">default_hparams</span><span class="p">)</span>
<span class="c1"># Access</span>
<span class="n">hparams</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">hparams</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
<span class="c1"># Update</span>
<span class="n">hparams</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;GRUCell&quot;</span>
<span class="n">hparams</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;num_units&quot;</span><span class="p">:</span> <span class="mi">100</span> <span class="p">}</span>
<span class="n">hparams</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">num_units</span> <span class="o">==</span> <span class="mi">100</span>
<span class="c1"># Add new</span>
<span class="n">hparams</span><span class="o">.</span><span class="n">add_hparam</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">hparams</span><span class="o">.</span><span class="n">index</span> <span class="o">==</span> <span class="mi">1</span>

<span class="c1"># Convert to `dict` (recursively)</span>
<span class="nb">type</span><span class="p">(</span><span class="n">hparams</span><span class="o">.</span><span class="n">todic</span><span class="p">())</span> <span class="o">==</span> <span class="nb">dict</span>

<span class="c1"># I/O</span>
<span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">hparams</span><span class="p">,</span> <span class="s2">&quot;hparams.dump&quot;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;hparams.dump&quot;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">hparams_loaded</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<dl class="docutils">
<dt>Args:</dt>
<dd><dl class="first last docutils">
<dt>hparams: A <cite>dict</cite> or an <cite>HParams</cite> instance containing hyperparameters.</dt>
<dd>If <cite>None</cite>, all hyperparameters are set to default values.</dd>
<dt>default_hparams (dict): Hyperparameters with default values. If <cite>None</cite>,</dt>
<dd>Hyperparameters are fully defined by <code class="xref py py-attr docutils literal notranslate"><span class="pre">hparams</span></code>.</dd>
<dt>allow_new_hparam (bool): If <cite>False</cite> (default), <code class="xref py py-attr docutils literal notranslate"><span class="pre">hparams</span></code> cannot</dt>
<dd>contain hyperparameters that are not included in
<code class="xref py py-attr docutils literal notranslate"><span class="pre">default_hparams</span></code>, except for the case of <code class="xref py py-attr docutils literal notranslate"><span class="pre">&quot;kwargs&quot;</span></code> as
above.</dd>
</dl>
</dd>
</dl>
<dl class="method">
<dt id="shabda.hyperparams.HParams.add_hparam">
<code class="descname">add_hparam</code><span class="sig-paren">(</span><em>name</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shabda/hyperparams/hyperparams.html#HParams.add_hparam"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shabda.hyperparams.HParams.add_hparam" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a new hyperparameter.</p>
</dd></dl>

<dl class="method">
<dt id="shabda.hyperparams.HParams.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em>, <em>default=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shabda/hyperparams/hyperparams.html#HParams.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shabda.hyperparams.HParams.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the hyperparameter value for the given name. If name is not
available then returns <code class="xref py py-attr docutils literal notranslate"><span class="pre">default</span></code>.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>name (str): the name of hyperparameter.
default: the value to be returned in case name does not exist.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="shabda.hyperparams.HParams.items">
<code class="descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shabda/hyperparams/hyperparams.html#HParams.items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shabda.hyperparams.HParams.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the list of hyperparam <cite>(name, value)</cite> pairs</p>
</dd></dl>

<dl class="method">
<dt id="shabda.hyperparams.HParams.keys">
<code class="descname">keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shabda/hyperparams/hyperparams.html#HParams.keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shabda.hyperparams.HParams.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the list of hyperparam names</p>
</dd></dl>

<dl class="method">
<dt id="shabda.hyperparams.HParams.todict">
<code class="descname">todict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/shabda/hyperparams/hyperparams.html#HParams.todict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#shabda.hyperparams.HParams.todict" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a copy of hyperparameters as a dictionary.</p>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="models.html" class="btn btn-neutral float-right" title="ModelBase" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="data.html" class="btn btn-neutral" title="DatasetFactory" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Shabda Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>